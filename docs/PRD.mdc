---
description: 
globs: 
alwaysApply: true
---
{alwaysApply: true, globs: ["**/*"]}

# MathIDE: Project Requirements Document (PRD)

## 1. Overview / Problem
MathIDE — это интерактивная среда для обучения решению математических уравнений. Она помогает ученику пошагово преобразовывать уравнения, предоставляя только допустимые и осмысленные операции, которые можно применить на каждом этапе. MathIDE не решает задачу за пользователя, а тренирует навык самостоятельного планирования решения, предлагая автокомплит допустимых действий и ранжируя их по полезности.

## 2. Key User Flows
- Пользователь вводит уравнение (или набор уравнений), которое хочет решить.
- MathIDE анализирует уравнение и предлагает список допустимых преобразований (автокомплит), перемешивая топ-5 наиболее релевантных.
- Пользователь выбирает одно из предложенных преобразований.
- MathIDE применяет выбранное преобразование и отображает новое состояние уравнения (или системы уравнений).
- История шагов сохраняется, пользователь может вернуться к любому из предыдущих состояний.
- В случае разветвления (например, система или альтернатива) отображаются все текущие уравнения.
- Пользователь может завершить решение или продолжить работу.
- Поддерживаются интерфейсы: терминал, Telegram-бот, веб-браузер.

## 3. Functional Requirements
- [ ] Приём уравнения от пользователя (LaTeX-формат, plain text).
- [ ] Генерация списка допустимых преобразований через GPT API (с возможностью смены модели).
- [ ] Ранжирование и перемешивание топ-5 предложений.
- [ ] Применение выбранного преобразования к уравнению (или системе).
- [ ] Ведение истории шагов, возможность возврата к предыдущим.
- [ ] Отображение формул в LaTeX (с рендерингом там, где возможно).
- [ ] Поддержка ветвящихся решений (системы, альтернативы).
- [ ] Модульная архитектура ядра (легко расширяемая).
- [ ] Вынесение промптов для GPT в отдельный модуль/файл.
- [ ] CLI, Telegram-бот, Web-интерфейс.
- [ ] Лёгкая смена GPT-модели (OpenAI, Qwen и др.).
- [ ] Документированная структура кода и API.

## 4. Non-goals
- Автоматическое решение уравнений без участия пользователя.
- Обучение пользователя технике ручных преобразований (цель — планирование, а не вычисления).
- Поддержка сложных математических объектов (интегралы, ряды и т.д.) на первом этапе.
- Мобильные приложения.
- Голосовой ввод.

## 5. Milestones & Release Plan
### MVP
- [ ] Ядро генерации предложений и применения преобразований через GPT API
- [ ] CLI-интерфейс
- [ ] История шагов
- [ ] LaTeX-отображение
- [ ] Лёгкая смена модели
- [ ] Вынесение промптов
- [ ] Перемешивание топ-5 предложений

### v0.2
- [ ] Telegram-бот (минимальный)
- [ ] Web-интерфейс (минимальный)
- [ ] Ветвящиеся решения

### v1.0
- [ ] Расширяемая архитектура ядра
- [ ] Документация
- [ ] Улучшенный UX

---
Документ обновляется по мере развития проекта. 