---
description: 
globs: 
alwaysApply: false
---
{alwaysApply: true, globs: ["**/*"]}

# План разработки MathIDE

## Этап 1: MVP
### Задачи
| Задача                                                        | Статус      | Комментарии/Детализация                                                                 |
|---------------------------------------------------------------|-------------|----------------------------------------------------------------------------------------|
| 1.1. Реализовать ядро генерации допустимых преобразований      | todo        |                                                                                        |
| 1.2. Реализовать применение выбранного преобразования          | todo        |                                                                                        |
| 1.3. Интегрировать GPT API (OpenAI, с возможностью смены)      | todo        |                                                                                        |
| 1.4. CLI-интерфейс для пользователя                            | todo        |                                                                                        |
| 1.5. Ведение истории шагов                                     | todo        |                                                                                        |
| 1.6. LaTeX-отображение в CLI                                   | todo        |                                                                                        |
| 1.7. Перемешивание топ-5 предложений                           | todo        |                                                                                        |
| 1.8. Проверка завершённости решения задачи                     | todo        |                                                                                        |
| 1.9. Промпты вынесены в отдельные файлы                        | todo        |                                                                                        |

### Критерии приёмки этапа 1 (MVP)
- [ ] Ядро корректно генерирует и применяет преобразования
- [ ] CLI-интерфейс работает и позволяет пройти полный сценарий, вплоть до завершения решения задачи
- [ ] История шагов сохраняется и доступна для возврата
- [ ] Формулы отображаются в LaTeX (rich)
- [ ] Возможна смена GPT-модели через конфиг
- [ ] Промпты редактируются без изменения кода
- [ ] Топ-5 предложений перемешиваются

## Этап 2: v0.2
### Задачи
| Задача                                                        | Статус      | Комментарии/Детализация                                                                 |
|---------------------------------------------------------------|-------------|----------------------------------------------------------------------------------------|
| 2.1. Реализовать Telegram-бот                                 | todo        |                                                                                        |
| 2.2. Реализовать минимальный Web-интерфейс                    | todo        |                                                                                        |
| 2.3. Поддержка ветвящихся решений (системы, альтернативы)     | todo        |                                                                                        |


### Критерии приёмки этапа 2
- [ ] Telegram-бот работает по основному сценарию
- [ ] Web-интерфейс доступен и отображает формулы
- [ ] Ветвящиеся решения корректно отображаются и обрабатываются

## Этап 3: v1.0
### Задачи
| Задача                                                        | Статус      | Комментарии/Детализация                                                                 |
|---------------------------------------------------------------|-------------|----------------------------------------------------------------------------------------|
| 3.1. Архитектура ядра расширяема и документирована            | todo        |                                                                                        |
| 3.2. Улучшенный UX CLI/Web/Telegram                           | todo        |                                                                                        |
| 3.3. Документация для разработчиков и пользователей           | todo        |                                                                                        |

### Критерии приёмки этапа 3
- [ ] Архитектура легко расширяется (новые интерфейсы, модели)
- [ ] Пользовательский опыт улучшен (LaTeX отображаются графически, история шагов показывается компактно и с визуальным отделением шагов)
- [ ] Документация полная и актуальная

## Часто встречающиеся проблемы
- Смешивание логики ядра и интерфейсов
- Жёстко зашитые промпты или параметры моделей
- Отсутствие тестов для критичных компонентов
- Необработанные ошибки при работе с API
- Неочевидная структура истории шагов
- Проблемы с отображением LaTeX в разных средах
- Лишние файлы в git-репозитории

## Рекомендуемые директивы

- Не отмечай задачу как done, пока не выполнены все критерии приёмки этапа.
- Перед началом задачи уточняй детали, если они неочевидны.
- После завершения задачи фиксируй, что было сделано и какие проблемы возникли.
